{"version":3,"file":"filter-outline.js","sources":["../src/OutlineFilter.js"],"sourcesContent":["import {vertex} from '@tools/fragments';\nimport fragment from './outline.frag';\nimport {Filter} from '@pixi/core';\nimport {rgb2hex, hex2rgb} from '@pixi/utils';\n\n/**\n * OutlineFilter, originally by mishaa\n * http://www.html5gamedevs.com/topic/10640-outline-a-sprite-change-certain-colors/?p=69966\n * http://codepen.io/mishaa/pen/emGNRB<br>\n * ![original](../tools/screenshots/dist/original.png)![filter](../tools/screenshots/dist/outline.png)\n *\n * @class\n * @extends PIXI.Filter\n * @memberof PIXI.filters\n * @see {@link https://www.npmjs.com/package/@pixi/filter-outline|@pixi/filter-outline}\n * @see {@link https://www.npmjs.com/package/pixi-filters|pixi-filters}\n * @param {number} [thickness=1] The tickness of the outline. Make it 2 times more for resolution 2\n * @param {number} [color=0x000000] The color of the outline.\n * @param {number} [quality=0.1] The quality of the outline from `0` to `1`, using a higher quality\n *        setting will result in slower performance and more accuracy.\n *\n * @example\n *  someSprite.filters = [new OutlineFilter(2, 0x99ff99)];\n */\nclass OutlineFilter extends Filter {\n\n    constructor(thickness = 1, color = 0x000000, quality = 0.1) {\n        const samples =  Math.max(\n            quality * OutlineFilter.MAX_SAMPLES,\n            OutlineFilter.MIN_SAMPLES\n        );\n        const angleStep = (Math.PI * 2 / samples).toFixed(7);\n\n        super(vertex, fragment.replace(/\\$\\{angleStep\\}/, angleStep));\n\n        this.uniforms.thickness = new Float32Array([0, 0]);\n        this.uniforms.outlineColor = new Float32Array([0, 0, 0, 1]);\n\n        Object.assign(this, { thickness, color, quality });\n    }\n\n    apply(filterManager, input, output, clear) {\n        this.uniforms.thickness[0] = this._thickness / input._frame.width;\n        this.uniforms.thickness[1] = this._thickness / input._frame.height;\n\n        filterManager.applyFilter(this, input, output, clear);\n    }\n\n    /**\n     * The color of the glow.\n     * @member {number}\n     * @default 0x000000\n     */\n    get color() {\n        return rgb2hex(this.uniforms.outlineColor);\n    }\n    set color(value) {\n        hex2rgb(value, this.uniforms.outlineColor);\n    }\n\n    /**\n     * The thickness of the outline.\n     * @member {number}\n     * @default 1\n     */\n    get thickness() {\n        return this._thickness;\n    }\n    set thickness(value) {\n        this._thickness = value;\n        this.padding = value;\n    }\n}\n\n/**\n * The minimum number of samples for rendering outline.\n * @static\n * @member {number} MIN_SAMPLES\n * @memberof PIXI.filters.OutlineFilter\n * @default 1\n */\nOutlineFilter.MIN_SAMPLES = 1;\n\n/**\n * The maximum number of samples for rendering outline.\n * @static\n * @member {number} MAX_SAMPLES\n * @memberof PIXI.filters.OutlineFilter\n * @default 100\n */\nOutlineFilter.MAX_SAMPLES = 100;\n\nexport { OutlineFilter };\n"],"names":["OutlineFilter","thickness","color","quality","const","samples","Math","max","MAX_SAMPLES","MIN_SAMPLES","angleStep","PI","toFixed","super","vertex","fragment","replace","this","uniforms","Float32Array","outlineColor","Object","assign","apply","filterManager","input","output","clear","_thickness","_frame","width","height","applyFilter","prototypeAccessors","rgb2hex","value","hex2rgb","padding","Filter"],"mappings":";;;;;;;uqCAwBMA,cAEF,WAAYC,EAAeC,EAAkBC,kBAArB,kBAAW,kBAAoB,IACnDC,IAAMC,EAAWC,KAAKC,IAClBJ,EAAUH,EAAcQ,YACxBR,EAAcS,aAEZC,GAAuB,EAAVJ,KAAKK,GAASN,GAASO,QAAQ,GAElDC,YAAMC,EAAQC,EAASC,QAAQ,kBAAmBN,IAElDO,KAAKC,SAASjB,UAAY,IAAIkB,aAAa,CAAC,EAAG,IAC/CF,KAAKC,SAASE,aAAe,IAAID,aAAa,CAAC,EAAG,EAAG,EAAG,IAExDE,OAAOC,OAAOL,KAAM,WAAEhB,QAAWC,UAAOC,0KAG5CoB,eAAMC,EAAeC,EAAOC,EAAQC,GAChCV,KAAKC,SAASjB,UAAU,GAAKgB,KAAKW,WAAaH,EAAMI,OAAOC,MAC5Db,KAAKC,SAASjB,UAAU,GAAKgB,KAAKW,WAAaH,EAAMI,OAAOE,OAE5DP,EAAcQ,YAAYf,KAAMQ,EAAOC,EAAQC,IAQnDM,EAAI/B,qBACA,OAAOgC,UAAQjB,KAAKC,SAASE,eAEjCa,EAAI/B,mBAAMiC,GACNC,UAAQD,EAAOlB,KAAKC,SAASE,eAQjCa,EAAIhC,yBACA,OAAOgB,KAAKW,YAEhBK,EAAIhC,uBAAUkC,GACVlB,KAAKW,WAAaO,EAClBlB,KAAKoB,QAAUF,6CA9CKG,iBAyD5BtC,EAAcS,YAAc,EAS5BT,EAAcQ,YAAc"}